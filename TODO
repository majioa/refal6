# r6i

1. Функция <SYSTEM 'команда'>, возвращающая код ответа.
2. Функция, опрашивающая атрибуты файла.
3. Функция <TRAP ...> для вызова прерываний.
4. Функция <APPLY sf ea> вызова интерпретатора для вычисления функции sf от аргумента ea.
Она сейчас есть. Но хорошо бы, чтобы она умела возвращать информацию об авостах.
Сейчас она просто авостится.

5. Была ошибка в процедуре анализа символа-ссылки на канал tochan (файл rbio.c).
После конструкции
    else if (ISREF(p))
все последующие четыре оператора должны выполняться под данным условием,
то есть должны быть блоком, но скобок не было, и потому только первый из
этих операторов выполнялся под условием, а остальные - вне его.
В результате при ошибочных обращениях к функциям ввода-вывода с
восклицательным знаком без канала происходит авост.
Ошибка исправлена. Старый файл rbio.c пока оставлен как rbio1.c.

Однако осталась еще одна проблема. Функция tochan оставляет header
*ah захваченным (посредством START(*ah)), при условии выхода по true,
а при выходе по false - нет. Это не везде учитывается при использовании.
А именно, во многих местах после вызова функции tochan не хватает
оператора END(...).
Предлагается исправить положение, при котором состояние захвата зависит
от динамического условия выхода.
Будет правильным поставить освобождение внутри функции tochan
в любом случае (чтобы функция выдавала незахваченный header)
А при использовании сделать заново захват, когда нужно, после выхода из нее.
Тогда всюду в программе будет лучше видно глазами, где не хватает
освобождений и их надо будет вставить.

# r6c

1. Исправить некорректности выдачи листинга: иногда добавляются лишние пустые строки.

2. Ошибка: при наличи слов $MODULE - $END остаются лишние предупреждения об неопределенных именах.
